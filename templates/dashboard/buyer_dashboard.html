<!doctype html>
<html lang="en" data-theme="light">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Buyer - PropertyPlus</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/sidebar.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard_base.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/animations.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard_updates.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/tools.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/filters.css') }}" />
</head>

<body class="pp-app pp-buyer" data-user-id="{{ session.user.id if session.user else '' }}">
  <div class="pp-layout">
    {% set role = "Buyer" %} {% include "components/_sidebar.html" with
    context %}

    <main class="pp-main">
      <header class="pp-topbar">
        <div></div>
      </header>

      <section class="pp-content">
        <!-- =========================
               HOME (Merged with Search)
               ========================= -->
        <div id="tab-home" class="tab-content">
          {% include "dashboard/components/_search_header.html" %}

          <!-- Page content (empty for now) -->
          <div class="pp-page-body">
            <!-- Results Header + View Toggle -->
            <div class="pp-results-head">
              <div class="pp-results-title">Properties</div>

              <div class="pp-view-toggle" role="group" aria-label="View toggle">
                <button type="button" class="pp-view-btn active" data-view="grid" aria-label="Grid view">
                  <i class="fas fa-border-all"></i>
                </button>
                <button type="button" class="pp-view-btn" data-view="list" aria-label="List view">
                  <i class="fas fa-bars"></i>
                </button>
              </div>
            </div>

            <!-- Results -->
            <div class="pp-results" data-view="grid" id="homePropertiesContainer">
              {% for prop in properties %}
                {% include "dashboard/components/_property_card.html" %}
              {% else %}
                <div class="pp-empty-state">
                  <div class="pp-empty-icon-wrapper">
                    <i class="fas fa-search"></i>
                  </div>
                  <h3>No Properties Found</h3>
                  <p>Try adjusting your search or filters to find what you're looking for.</p>
                </div>
              {% endfor %}
            </div>

          </div>
        </div>

        <!-- =========================
               PROFILE
               ========================= -->
        <div id="tab-profile" class="tab-content" style="display: none">
          {% include "components/_profile.html" %}
        </div>

        <!-- =========================
               SAVED
               ========================= -->
        <div id="tab-saved" class="tab-content" style="display: none">
          <div class="pp-page-body">
            <div class="pp-results-head">
              <div class="pp-results-title">Saved Properties</div>

              <div class="pp-view-toggle" role="group" aria-label="View toggle">
                <button type="button" class="pp-view-btn active" data-view="grid" aria-label="Grid view">
                  <i class="fas fa-border-all"></i>
                </button>
                <button type="button" class="pp-view-btn" data-view="list" aria-label="List view">
                  <i class="fas fa-bars"></i>
                </button>
              </div>
            </div>


            <div class="pp-results" data-view="grid" id="savedPropertiesContainer">
              {% for prop in saved_properties %}
                {% set is_saved_tab = True %}
                {% include "dashboard/components/_property_card.html" %}
              {% else %}
                <div class="pp-empty-state">
                  <div class="pp-empty-icon-wrapper">
                    <i class="fas fa-heart"></i>
                  </div>
                  <h3>No Saved Properties</h3>
                  <p>Properties you save will appear here for quick access later.</p>
                </div>
              {% endfor %}
            </div>
          </div>
        </div>

        <!-- =========================
               HELP & SUPPORT
               ========================= -->
        <div id="tab-help" class="tab-content" style="display: none">
          {% set support_email = 'propertyplusglobal@gmail.com' %}
          {% include "dashboard/components/_help_support.html" %}
        </div>

        <!-- =========================
               SETTINGS
               ========================= -->
        <div id="tab-settings" class="tab-content" style="display: none">
          <!-- Include New Settings Component -->
          {% include "components/_settings.html" %}
        </div>

        <!-- =========================
               TOOLS OVERVIEW
               ========================= -->
        <div id="tab-tools" class="tab-content" style="display: none">
          {% include "dashboard/components/_tools_overview.html" %}
        </div>

        {% include "dashboard/components/_calculators.html" %}
      </section>
    </main>
  </div>

  {% include "dashboard/components/_property_modal.html" %}

  <script id="locationDataJson" type="application/json">{{ location_data|tojson }}</script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="{{ url_for('static', filename='js/dashboard_base.js') }}"></script>
  <script src="{{ url_for('static', filename='js/tools.js') }}"></script>
  <script src="{{ url_for('static', filename='js/dashboard_filters.js') }}"></script>
</body>

</html>