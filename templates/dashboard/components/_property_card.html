<div class="pp-property-card" data-id="{{ prop.id }}" onclick="openPropertyModal(this.dataset.id)" style="cursor: pointer;">
    <div class="pp-prop-img">
        {% if prop.images and prop.images|length > 0 %}
        <img src="{{ url_for('static', filename=prop.images[0]) }}" alt="Property"
            onerror="this.style.display='none'; this.parentElement.innerText='IMG'">
        {% else %}
        IMG
        {% endif %}
    </div>
    <div class="pp-prop-body">
        <div class="pp-prop-title">{{ prop.title }}</div>
        <div class="pp-prop-meta">{{ prop.city }} • {{ prop.state }}</div>
        <div class="pp-prop-price">
            {% if prop.listing_type == 'Rent' %}
            ₹{{ "{:,.0f}".format(prop.rent_amount or 0) }}/month
            {% else %}
            ₹{{ "{:,.0f}".format(prop.expected_price or 0) }}
            {% endif %}
        </div>
    </div>

    <!-- Status Capsule -->
    <div class="pp-status-capsule {% if prop.listing_type == 'Rent' %}is-rent{% else %}is-sale{% endif %}">
        {{ 'Rent' if prop.listing_type == 'Rent' else 'Buy' }}
    </div>

    <!-- Most Interested Badge -->
    {% if most_interested and prop.id == most_interested.id %}
    <div class="pp-most-interested-badge">
        {{ most_interested.count }} Interested
    </div>
    {% endif %}

    <!-- Actions -->
    <div class="pp-card-actions">
        {% if role == "Seller" %}
        <button type="button" class="pp-card-action-btn download-btn" data-id="{{ prop.id }}"
            onclick="event.stopPropagation(); downloadPropertyPDF(this.dataset.id)" title="Download Property Brochure">
            <i class="fas fa-file-pdf"></i>
        </button>
        <button type="button" class="pp-card-action-btn edit-btn" data-id="{{ prop.id }}"
            onclick="event.stopPropagation(); openEditSidebar(this.dataset.id)" title="Quick Edit">
            <i class="fas fa-edit"></i>
        </button>
        <button type="button" class="pp-card-action-btn delete-btn" data-id="{{ prop.id }}"
            onclick="event.stopPropagation(); openDeleteConfirm(this.dataset.id)" title="Delete Property">
            <i class="fas fa-trash-alt"></i>
        </button>
        {% else %}
        <button type="button" class="pp-card-action-btn download-btn-card" data-id="{{ prop.id }}"
            onclick="event.stopPropagation(); downloadPropertyPDF(this.dataset.id)" title="Download Property Brochure">
            <i class="fas fa-file-pdf"></i>
        </button>
        <button type="button" class="pp-card-action-btn pp-heart-btn-card {% if prop.is_saved or is_saved_tab %}is-saved{% endif %}"
            onclick="event.stopPropagation(); toggleSaveFromCard(this.dataset.propertyId, this)" data-property-id="{{ prop.id }}">
            <div class="like-wrapper">
                <div class="ripple"></div>
                <svg class="heart" width="24" height="24" viewBox="0 0 24 24">
                    <path d="M12,21.35L10.55,20.03C5.4,15.36 2,12.27 2,8.5C2,5.41 4.42,3 7.5,3C9.24,3 10.91,3.81 12,5.08C13.09,3.81 14.76,3 16.5,3C19.58,3 22,5.41 22,8.5C22,12.27 18.6,15.36 13.45,20.03L12,21.35Z"></path>
                </svg>
                <div class="particles" style="--total-particles: 6">
                    <div class="particle" style="--i: 1; --color: #7642F0"></div>
                    <div class="particle" style="--i: 2; --color: #AFD27F"></div>
                    <div class="particle" style="--i: 3; --color: #DE8F4F"></div>
                    <div class="particle" style="--i: 4; --color: #D0516B"></div>
                    <div class="particle" style="--i: 5; --color: #5686F2"></div>
                    <div class="particle" style="--i: 6; --color: #D53EF3"></div>
                </div>
            </div>
        </button>
        {% endif %}
    </div>
</div>
